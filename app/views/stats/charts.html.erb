<script type="text/javascript" charset="utf-8">
  $(function(){
    new Highcharts.Chart({
      chart: {
        renderTo: "chart"
      },
      title: {
        text: "Top Score"
      },
      xAxis: {
        type: "datetime"
      },
      yAxis: {
        title: {
          text: "min"
        }
      },
      tooltip: {
        formatter: function () {
          return Highcharts.dateFormat("%B %e %Y", this.x) + ': ' +
          Highcharts.numberFormat(this.y, 0) + ' min';
        }
      },
      series: [
      <% @topentries.each do |name,entries| %>
        {
        name: '<%= name %>',
        pointInterval: <%= 1.day * 1000 %>,
        pointStart: <%= entries.first.chartdate %>,
        data: <%= entries.map(&:score) %>
        },
      <% end %>
      ],
    });
  });
</script>

<div id="chart" style="width:560px; height:300px;"></div>
